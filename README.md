### [English README](README2.md)

[批量重新编码](batch-recode-ps1-bat/README.md)


# FFmpeg BAT 脚本
FFmpeg bat脚本，可以做一些简单的音视频编辑。

暂时写在nvidia rtx 2070笔记本版上能使用的，大部分不需要使用nvenc编码器的脚本，去除“-hwaccel cuda”即可在没有N卡的电脑上使用。

# 如何使用
下载 [ffmpeg](https://www.gyan.dev/ffmpeg/builds/), 解压到文件夹, 把子文件夹里的bin文件夹，也就是含有ffmpeg.exe的文件夹添加到环境变量path里. 例如，[直接下载链接, 发布核心版(release essentials)](https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-essentials.7z) (这应该是那个网站上的最小版本)。

## Tips: 只有一个输入参数的脚本，可以drag&drop, 也就是拖动文件到脚本使用

下载bat脚本，放到一个文件夹，把文件夹加入环境变量path。

### 注意，使用包含中文的bat脚本，需要用ANSI编码。操作是，用Notepad(记事本)编辑，另存为的时候选择编码为ANSI。

用windows资源管理器打开包含你的音视频文件的文件夹，在那里打开终端(按住Shift, 点鼠标右键，选择在这里打开PowerShell), 向终端输入脚本名字和参数，用空格隔开。注意你可能需要在ffmpeg执行时输入更多参数，例如“y”以同意覆盖已有的同名文件。
### 建议不要在音视频文件名字里使用中文。脚本生成的拼接列表txt文件是ANSI编码，如果里面含有中文，ffmpeg将不能正常识别、拼接这些文件，需要把生成的拼接列表txt文件改成UTF-8编码，然后才可以使用脚本拼接。

# 功能
### 已实现
00-剪切：不重新编码，粗剪(因为从关键帧开始，开始时间不准，有几秒钟的误差，结束时间比较准)

01-生成拼接列表：

02-拼接：不重新编码，需要视频或音频的编码、长宽、帧率等一致

03-去除音频：

04-提取音频：

05-换音频：和音视频中较短的对齐，或和较长的对齐

06-逐帧提取图片：按起始时刻和帧数量提取，或按照时间段提取。提示: 先剪切视频，再提取图片，会快很多。

07-改变音量；改变视频或音频的音量

08-剪切画面并合并视频：剪切部分画面，横向合并两个或三个视频

## 编辑中

音频：改变音频速度；

字幕：添加、去除、提取软字幕(mp4，mkv可以)，添加硬字幕(需要进行视频编码)；

不重新编码：改变视频的帧率从而改变速度；

转换编码：换编码为h264/h265，去重复帧，设置目标码率，改变横纵像素值，创建单色视频，创建无声的音频；

一个脚本完成拼接和转编码，不在硬盘上写入中间文件；

### 计划中
音频：混BGM，且按时间较短或较长的文件生成最终视频文件；

不重新编码：旋转视频(仅支持90度的倍数)；

重新编码：设置文件大小，用图片合成视频并设定帧率，纵向合并两个或更多视频，把多个视频覆盖在另一个上的一个矩形范围内；