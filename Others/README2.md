### [中文说明](README.md)

# FFmpeg BAT scripts
FFmpeg BAT scripts to do some simple video/audio edits.

For now, I'm writing for my nvidia rtx 2070 laptop version. For most scripts that doesn't recode using nvidia's encoder (nvenc_hevc, nvenc_h264, etc.), just remove "-hwaccel cuda" and it could work on computers without a nvidia GPU.

# How to use
Download [ffmpeg](https://www.gyan.dev/ffmpeg/builds/), extract it to a folder, add that bin subfolder to path, which contains ffmpeg.exe. For example, [direct link(release essentials)](https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-essentials.7z) (this should be the smallest build on that site).

## Tips: For scripts with only one input parameter, you can drag&drop

Download the bat scripts, put them to a folder, add that folder to path.

### Note that to use bat scripts with Chinese characters, you need to change the character encoding to ANSI. Edit with notepad, choose "save as", pick ANSI as the encoding type.

Use explorer to navigate to the folder containing your video/audio files, open a terminal there (Press Shift and right click, select open PowerShell here) and use the scripts by typing the name of the script file and arguments into the terminal, separated by space(s). Check that you might need to type extra arguments when ffmpeg is running, for example "y" to agree to replace existing file with the same name.

### I don't recommend using Chinese in names of the audio/video files. The txt files generated by the scripts are in ANSI encoding. If there's Chinese character, ffmpeg will not recognize these files or concatenate them. You need to change the encoding of the txt file to UTF-8, only then could you use the scripts to concatenate the files.

# Functions
### implemented
00-cut：no recoding, roughly cut(It starts from certain keyframe, so the beginning time could be seconds off. The ending time is more accurate.)

01-generate-concatenate-list：

02-concatenate：no recoding, requiring that the encode, pixel width and height, framerate, etc. of the videos or audios are the same.

03-vid-remove-audio:

04-vid2audio:

05-vid-replace-audio: can align to the shorter or longer one

06-vid2pic: extracts pictures frame by frame, given time interval or start time and frame count. Tips: cut the video first, then extracting pictures would be a lot faster.

07-audio-change-volume: changes audio volume for video or audio.

08-crop-and-merge: cut part of the video out, merge two or three videos horizontally

## editing
audio: changes audio speed;

subtitle: adds, removes or extracts soft subtitle(mp4 or mkv), adds hard subtile(needs video recoding);

without recoding: changes video fps so that changes video speed;

recoding: recoding to h264/h265, removing duplicated frames, set target bitrate, change pixel width and height, creating one-colored video, create silent audio;

to concatenate and recoding in one script and does not write internal files to disk;

### planning
audio: mixes BGM with shortest or longest alignment;

no recoding: rotates a video(n*90 degree only);

recoding: set target file size, creating video from pictures and setting fps, merge two or more videos vertically, overlay many videos over another;